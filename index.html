<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Karry Kraze Catalog</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/isotope-layout@3/dist/isotope.pkgd.min.js"></script>
</head>
<body class="bg-white text-gray-900">
    <section class="max-w-7xl mx-auto px-4 py-10">
        <h1 class="text-3xl font-bold text-center mb-8">Shop the Collection</h1>

        <!-- Filters -->
        <div class="flex flex-wrap justify-center gap-3 mb-8">
            <button class="filter-btn px-4 py-2 border rounded" data-filter="*">All</button>
            <button class="filter-btn px-4 py-2 border rounded" data-filter=".headwear">Headwear</button>
            <button class="filter-btn px-4 py-2 border rounded" data-filter=".bags">Bags</button>
            <button class="filter-btn px-4 py-2 border rounded" data-filter=".charms">Charms</button>
        </div>

        <!-- Product Grid -->
        <div id="productGrid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6"></div>
    </section>

    <script>
        async function loadProducts() {
            const res = await fetch("https://www.karrykraze.com/products/products.json");
            const products = await res.json();
            const grid = document.getElementById("productGrid");
            let html = "";

            for (const key in products) {
                const item = products[key];

                // Identify category class for filtering
                const categoryClass = item.category.toLowerCase();

                html += `
              <div class="product-item ${categoryClass} border rounded-lg p-4 text-center">
                <a href="${item.url}" target="_blank">
                  <img src="${item.image}" alt="${item.name}" class="mx-auto mb-3 rounded h-40 object-contain" />
                  <h2 class="text-lg font-semibold">${item.name}</h2>
                  <p class="text-red-600 font-bold mt-1">$${item.price.toFixed(2)}</p>
                </a>
              </div>
            `;
            }

            grid.innerHTML = html;

            // Initialize Isotope
            const iso = new Isotope(grid, {
                itemSelector: ".product-item",
                layoutMode: "fitRows"
            });

            // Filter button handling
            document.querySelectorAll(".filter-btn").forEach(btn => {
                btn.addEventListener("click", () => {
                    const filter = btn.getAttribute("data-filter");
                    iso.arrange({ filter });
                });
            });
        }

        loadProducts();
    </script>
</body>
</html>
